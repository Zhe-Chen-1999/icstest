% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ics_tests.R
\name{model_assisted_test}
\alias{model_assisted_test}
\title{Model-Assisted Test for Informative Cluster Size}
\usage{
model_assisted_test(Y, Z, cluster_id, covariates = NULL, adjust_size = TRUE)
}
\arguments{
\item{Y}{Numeric vector of individual-level outcomes}

\item{Z}{Numeric vector of individual-level treatment assignments (0/1)}

\item{cluster_id}{Vector identifying cluster membership}

\item{covariates}{Optional matrix/data.frame of cluster-level covariates}

\item{adjust_size}{Logical indicating whether to adjust for cluster size (default TRUE)}
}
\value{
List containing test statistic and p-value
}
\description{
Performs a model-assisted test for informative cluster sizes in cluster
randomized trials.
}
\examples{
# Generate example data
n_clusters <- 200
cluster_sizes <- sample(20:80, n_clusters, replace = TRUE)
n <- sum(cluster_sizes)
cluster_id <- rep(1:n_clusters, cluster_sizes)
Z <- rep(rbinom(n_clusters, 1, 0.5), cluster_sizes)
Y0 <- rnorm(n) + rep(rnorm(n_clusters), cluster_sizes)
tau <- rnorm(n) + rep(0.5 * (cluster_sizes > 50), cluster_sizes)
Y <- Y0 + tau * Z

# Run test
result <- model_assisted_test(Y, Z, cluster_id)
print(result)
}
