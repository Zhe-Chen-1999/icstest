% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ics_tests.R
\name{randomization_test}
\alias{randomization_test}
\title{Randomization-Based Test for Informative Cluster Size}
\usage{
randomization_test(
  Y,
  Z,
  cluster_id,
  covariates = NULL,
  adjust_size = TRUE,
  n_perms = 5000
)
}
\arguments{
\item{Y}{Numeric vector of individual-level outcomes}

\item{Z}{Numeric vector of individual-level treatment assignments (0/1)}

\item{cluster_id}{Vector identifying cluster membership}

\item{covariates}{Optional matrix/data.frame of cluster-level covariates}

\item{adjust_size}{Logical indicating whether to adjust for cluster size}

\item{n_perms}{Number of permutations for randomization test (default 5000)}
}
\value{
List containing test statistic and permutation-based p-value
}
\description{
Performs a randomization-based test for informative cluster sizes in cluster
randomized trials.
}
\examples{
# Generate example data
n_clusters <- 200
cluster_sizes <- sample(20:80, n_clusters, replace = TRUE)
n <- sum(cluster_sizes)
cluster_id <- rep(1:n_clusters, cluster_sizes)
Z <- rep(rbinom(n_clusters, 1, 0.5), cluster_sizes)
Y0 <- rnorm(n) + rep(rnorm(n_clusters), cluster_sizes)
tau <- rnorm(n) + rep(0.5 * (cluster_sizes > 50), cluster_sizes)
Y <- Y0 + tau * Z

# Run test
result <- randomization_test(Y, Z, cluster_id, n_perms = 5000)
print(result)
}
